(self.webpackChunkrickrollblock=self.webpackChunkrickrollblock||[]).push([[352],{674:(e,r,t)=>{"use strict";var n=t(416);const o=function(e,r){return t=void 0,o=void 0,s=function(){var t,o,a,s,l;return function(e,r){var t,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=r.call(e,s)}catch(e){a=[6,e],n=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(c){switch(c.label){case 0:return[4,n.browser.storage.local.get("currentBlacklistURL")];case 1:switch(t=c.sent(),o=t[Object.keys(t)[0]],e.key){case"override":return[3,2];case"unblock":return[3,4]}return[3,7];case 2:return[4,n.browser.storage.local.set({oneTimeOverride:o})];case 3:return c.sent(),n.browser.tabs.update(r.tab.id,{url:o,loadReplace:!0}),[3,7];case 4:return[4,n.browser.storage.local.get("blacklist")];case 5:return a=c.sent(),s=a&&a[Object.keys(a)[0]]||[],l=s.indexOf(o),s.splice(l,1),[4,n.browser.storage.local.set({blacklist:s})];case 6:return c.sent(),n.browser.tabs.update(r.tab.id,{url:o,loadReplace:!0}),[3,7];case 7:return[2]}}))},new((a=void 0)||(a=Promise))((function(e,r){function n(e){try{c(s.next(e))}catch(e){r(e)}}function l(e){try{c(s.throw(e))}catch(e){r(e)}}function c(r){var t;r.done?e(r.value):(t=r.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,l)}c((s=s.apply(t,o||[])).next())}));var t,o,a,s};const a=function(e,r,t){return o=void 0,a=void 0,l=function(){var o,a,s,l,c;return function(e,r){var t,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=r.call(e,s)}catch(e){a=[6,e],n=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(u){switch(u.label){case 0:return r.url?[4,n.browser.storage.local.get("enabled")]:[3,7];case 1:return(o=u.sent())&&o[Object.keys(o)[0]]?(a=t.url,[4,n.browser.storage.local.get("oneTimeOverride")]):[2];case 2:return s=u.sent(),l=s&&s[Object.keys(s)[0]],(c=l===a)?[3,5]:[4,n.browser.storage.local.set({currentBlacklistURL:a})];case 3:return u.sent(),[4,n.browser.tabs.update(e,{url:"/blocked.html",loadReplace:!0})];case 4:u.sent(),u.label=5;case 5:return c?[4,n.browser.storage.local.remove("oneTimeOverride")]:[3,7];case 6:u.sent(),u.label=7;case 7:return[2]}}))},new((s=void 0)||(s=Promise))((function(e,r){function t(e){try{c(l.next(e))}catch(e){r(e)}}function n(e){try{c(l.throw(e))}catch(e){r(e)}}function c(r){var o;r.done?e(r.value):(o=r.value,o instanceof s?o:new s((function(e){e(o)}))).then(t,n)}c((l=l.apply(o,a||[])).next())}));var o,a,s,l};n.browser.storage.local.get("blacklist").then((function(e){var r=e[Object.keys(e)[0]];n.browser.tabs.onUpdated.addListener(a,{urls:r&&r.length?r:["https://dummydummydummy"]}),n.browser.runtime.onMessage.addListener(o)})),n.browser.storage.onChanged.addListener((function(e){var r=e.blacklist;if(r){var t=r.newValue;n.browser.tabs.onUpdated.removeListener(a),n.browser.tabs.onUpdated.addListener(a,{urls:t})}}))},416:(e,r,t)=>{"use strict";"undefined"==typeof window?r.browser={}:r.browser=t(150)}},0,[[674,712]]]);